<?xml version="1.0" encoding="ISO-8859-1"?>

<service:service-group 
	xmlns:service="http://pcm.framework.org/service"
	xmlns:xs="http://www.w3.org/2001/XMLSchema" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://pcm.framework.org/service services.xsd">

	<service
	name="ConsultaPeticionesGEDEON"	profile="ADMINISTRADOR, CONSULTOR_UTE">

	<action event="query" submitError="ConsultaPeticionesGEDEON.query"
		submitSucces="ConsultaPeticionesGEDEON.query">

		<viewComponent>

			<form columns="12" title="Peticiones GEDEON">
				
				<userbuttons>
				
					<button	link="prjManager" id="histog1" name="Histogram" >
						<fieldViewSet nameSpace="histog1">
							<fieldView name="highchart" hidden="true" value="histogram3D"/>
							<fieldView name="entidadGrafico" hidden="true" value="peticiones"/>
							<fieldView name="orderBy" hidden="true" value="17"/>
							<fieldView name="fieldForGroupBy" hidden="true" value="17"/>
							<fieldView name="agregado" type="select">
								<optionValues>
									<option code="-1" title="peticiones" selected="true"></option>								
									<option code="28" title="UTs Estimadas"></option>
								</optionValues>
							</fieldView>
							<fieldView name="escalado" type="select" size="1">
								<optionValues>
									<option code="dayly" title="Diario"></option>
									<option code="weekly" title="Semanal"></option>
									<option code="monthly" title="Mensual" selected="true"></option>
									<option code="3monthly" title="Trimestral"></option>
									<option code="6monthly" title="Semestral"></option>
									<option code="anualy" title="Anual"></option>
									<option code="automatic" title="Automatico"></option>
								</optionValues>
							</fieldView>
							<fieldView name="operation" type="select">
								<optionValues>
									<option code="SUM" title="Agregación" selected="true"></option>								
									<option code="AVG" title="Promediar"></option>
								</optionValues>
							</fieldView>
						</fieldViewSet>
					</button>
					
					<button link="prjManager" id="histDual1"
						name="Frequency">						
						<fieldViewSet nameSpace="histDual1">
							<fieldView name="highchart" hidden="true" value="dualhistogram"/>
							<fieldView name="entidadGrafico" hidden="true" value="peticiones"/>
							<fieldView name="orderBy" hidden="true" value="17"/>							
							<fieldView name="fieldForGroupBy" type="select" size="1">
								<optionValues>
									<option code="-1" title="periodos" selected="true"></option>
									<option code="26" title="aplicacion"></option>
									<option code="13" title="tipo"></option>
									<option code="7" title="situacion"></option>
									<option code="12" title="area destino"></option>
									<option code="16" title="prioridad"></option>
									<option code="6" title="solicitante"></option>
								</optionValues>
							</fieldView>
							<fieldView name="agregado" type="select"  size="1">
								<optionValues>
									<option code="-1" title="peticiones"></option>
									<option code="28" title="UTs estimadas" selected="true"></option>
									<option code="29" title="UTs reales"></option>
								</optionValues>
							</fieldView>
							<fieldView name="escalado" type="select"  size="1">
								<optionValues>
									<option code="dayly" title="Diario"></option>
									<option code="weekly" title="Semanal"></option>
									<option code="monthly" title="Mensual" selected="true"></option>
									<option code="3monthly" title="Trimestral"></option>
									<option code="6monthly" title="Semestral"></option>
									<option code="anualy" title="Anual"></option>
									<option code="automatic" title="Automatico"></option>
								</optionValues>
							</fieldView>
							<fieldView name="operation" type="select">
								<optionValues>
									<option code="SUM" title="Agregación" selected="true"></option>								
									<option code="AVG" title="Promediar"></option>
								</optionValues>
							</fieldView>						
						</fieldViewSet>
					</button>
										
					<button link="prjManager" id="spiderchart1"
						name="Spiderwebchart">
						<fieldViewSet nameSpace="spiderchart1">
							<fieldView name="highchart" hidden="true" value="spiderweb"/>
							<fieldView name="entidadGrafico" hidden="true" value="peticiones"/>
							<fieldView name="orderBy" hidden="true" value="17"/>							
							<fieldView name="fieldForGroupBy" type="select"  size="1">
								<optionValues>
									<option code="26" title="aplicacion" selected="true"></option>
									<option code="7" title="situacion"></option>
									<option code="13" title="tipo"></option>
									<option code="16" title="prioridad"></option>
									<option code="12" title="area destino"></option>
									<option code="6" title="solicitante"></option>
								</optionValues>
							</fieldView>
							<fieldView name="agregado" type="select"  size="1">
								<optionValues>
									<option code="-1" title="peticiones"></option>
									<option code="28" title="UTs estimadas" selected="true"></option>
									<option code="29" title="UTs reales"></option>
								</optionValues>
							</fieldView>
							<fieldView name="operation" hidden="true" value="SUM"/>
						</fieldViewSet>
					</button>
																		
					<button link="prjManager" id="barchart1"
						name="Barchart">
						<fieldViewSet nameSpace="barchart1">
							<fieldView name="highchart" hidden="true" value="barchart"/>
							<fieldView name="entidadGrafico" hidden="true" value="peticiones"/>
							<fieldView name="orderBy" hidden="true" value="17"/>
							<fieldView name="fieldForGroupBy" type="select" size="3">
								<optionValues selectionMultiple="true">
									<option code="26" title="aplicacion" selected="true"></option>
									<option code="7" title="situacion" selected="true"></option>
									<option code="13" title="tipo"></option>
									<option code="26" title="aplicacion"></option>
									<option code="12" title="area destino"></option>
									<option code="6" title="solicitante"></option>
								</optionValues>
							</fieldView>
							<fieldView name="agregado" type="select" size="1">
								<optionValues>
									<option code="-1" title="peticiones"></option>
									<option code="28" title="UTs estimadas" selected="true"></option>
									<option code="29" title="UTs reales"></option>
								</optionValues>
							</fieldView>
							<fieldView name="operation" type="select" size="1">
								<optionValues>
									<option code="SUM" title="agregar" selected="true"></option>
									<option code="AVG" title="promediar"></option>
								</optionValues>
							</fieldView>
						</fieldViewSet>
					</button>
												
					<button link="prjManager" id="piechart1"
						name="Piechart">
						<fieldViewSet nameSpace="piechart1">
							<fieldView name="highchart" hidden="true" value="piechart"/>
							<fieldView name="entidadGrafico" hidden="true" value="peticiones"/>
							<fieldView name="orderBy" hidden="true" value="17"/>
							<fieldView name="fieldForGroupBy" type="select" size="1">
								<optionValues selectionMultiple="true">
									<option code="26" title="aplicacion"></option>									
									<option code="13" title="tipo"></option>
									<option code="7" title="situacion" selected="true"></option>
									<option code="16" title="prioridad"></option>
									<option code="12" title="area destino"></option>
									<option code="6" title="solicitante"></option>
								</optionValues>
							</fieldView>
							<fieldView name="agregado" type="select" size="1">
								<optionValues>
									<option code="-1" title="peticiones"></option>
									<option code="28" title="UTs estimadas" selected="true"></option>
									<option code="29" title="UTs reales"></option>
								</optionValues>
							</fieldView>				
							<fieldView name="operation" type="select" size="1">
								<optionValues>
									<option code="SUM" title="agregar" selected="true"></option>
									<option code="AVG" title="promediar"></option>
								</optionValues>
							</fieldView>
						</fieldViewSet>
					</button>
					
					
				</userbuttons>
			
				<fieldViewSet entitymodel="peticiones"
					nameSpace="peticiones">
					
					<fieldset legend="Por Localizacion">
					
						<fieldView mappingTo="17" hidden="true" />
					
						<!-- primera fila -->
						<fieldView mappingTo="9" type="checkbox" size="6">
							<optionValues selectionMultiple="true" entitymodel="subdireccion"
								descrMappingTo="3">
							</optionValues>
						</fieldView>
						
						<fieldView separator="br" />
						<fieldView separator="br" />
						
						<!-- segunda fila -->
						<fieldView mappingTo="12" editable="true" type="checkbox" size="4">
							<optionValues selectionMultiple="true" entitymodel="peticiones"
								descrMappingTo="12" codeField="12">
							</optionValues>
						</fieldView>
						
						<fieldView separator="br" />
						<fieldView separator="br" />
						
						<!-- tercera fila -->
						
						<fieldView mappingTo="41" type="checkbox">
							<optionValues selectionMultiple="true" entitymodel="tecnologia"
								descrMappingTo="2">
							</optionValues>
						</fieldView>
																		
						<fieldView separator="br" />
						
					</fieldset>
						
					<fieldset legend="Por aplicativo">
					
						<fieldView mappingTo="27" type="checkbox" size="8">
							<optionValues selectionMultiple="true" entitymodel="aplicativo"
								descrMappingTo="2" codeField="2">
							</optionValues>
						</fieldView>
						
						<fieldView separator="br" />
						<fieldView separator="br" />
												
						<fieldView mappingTo="13" type="checkbox" size="8">
							<optionValues selectionMultiple="true" entitymodel="peticiones"
								descrMappingTo="13" codeField="13">
							</optionValues>
						</fieldView>
						<fieldView separator="br" />
					</fieldset>
					
					<fieldset legend="Por Situacion">	
					
						<fieldView mappingTo="7" type="checkbox" size="6">
							<optionValues selectionMultiple="true" entitymodel="peticiones"
								descrMappingTo="7" codeField="7">
							</optionValues>
						</fieldView>
						<fieldView separator="br" />
					</fieldset>
						
					<fieldset legend="Por Detalle">
						
							<fieldView mappingTo="1" editable="true" size="6" />
							<fieldView mappingTo="35" editable="true" />
							<fieldView mappingTo="2" editable="true" />
							<fieldView mappingTo="3" editable="true" />
							<fieldView mappingTo="16" type="checkbox">
								<optionValues selectionMultiple="true" entitymodel="peticiones"
									descrMappingTo="16" codeField="16">
								</optionValues>
							</fieldView>
							<fieldView separator="br" />
					</fieldset>
					
					<fieldset legend="Criterios por Fechas">
						<fieldView mappingTo="18" editable="true" />
						<fieldView mappingTo="19" editable="true" />
						<fieldView mappingTo="22" editable="true" />
						
						<fieldView separator="br" />
						<fieldView separator="br" />
											
						<!-- tercera fila -->
						
						<fieldView mappingTo="23" editable="true" />					
						<fieldView mappingTo="37" editable="true" />							
						
						<fieldView separator="br" />
						<fieldView separator="br" />
						
						<!-- cuarta fila -->			
											
						<fieldView mappingTo="20" editable="true" />
						<fieldView mappingTo="21" editable="true" />
						
					</fieldset>
					
				</fieldViewSet> 
			</form>

			<grid title="Listado peticiones" orderDirection="desc" defaultOrderField="peticiones.37"
				eventsRegistered="detail"><!-- detail -->

				<fieldViewSet entitymodel="peticiones"	nameSpace="peticiones">
					<fieldView mappingTo="17" hidden="true" />
					<fieldView mappingTo="1" editable="false" styleCss="font-weight: bold;"/><!-- Peticion -->
					<fieldView mappingTo="37" editable="false" />
					<fieldView mappingTo="12" editable="false" styleCss="font-style: italic;"/>
					<fieldView mappingTo="26" editable="false" styleCss="font-weight: bolder;"/>
					<fieldView mappingTo="13" editable="false" />
					<fieldView mappingTo="7" editable="false" styleCss="font-weight: bold;"/><!-- Estado_peticion_originaria -->					
					<fieldView mappingTo="42" editable="false" styleCss="font-weight: bold;color: orange;"/>
					<fieldView mappingTo="28" editable="false" styleCss="font-weight: bold;color: green;"/>
					<fieldView mappingTo="29" editable="false" styleCss="font-weight: bold;"/>
					
					<!-- INICIO datos para Excel del Informe quincenal a Subdirecciones de Gestion -->
					
					<fieldView mappingTo="9" type="select"><!-- Subdireccion Origen de la peticion -->
						<optionValues entitymodel="subdireccion" descrMappingTo="3">
						</optionValues>
					</fieldView>
					
					<fieldView mappingTo="10" type="select"><!-- Area: Subdireccion Origen de la peticion -->
						<optionValues entitymodel="servicio" descrMappingTo="2">
						</optionValues>
					</fieldView>
										
					<fieldView mappingTo="2" editable="false" /><!-- Titulo -->
					<fieldView mappingTo="18" editable="false" styleCss="font-weight: bold;color: #00B4DB;"/><!-- Fecha_de_tramitacion -->
					<fieldView mappingTo="19" editable="false" styleCss="font-weight: bold;color: #00B4DB;"/><!-- Fecha_de_necesidad -->
					
					<fieldView mappingTo="16" editable="false" /><!-- Prioridad -->
					
					<!-- FIN datos para Excel del Informe quincenal a Subdirecciones de Gestion -->
															
					<fieldView mappingTo="22" editable="false" styleCss="font-weight: bold;color: #00B4DB;"/> <!-- Des_fecha_prevista_inicio-->
					<fieldView mappingTo="24" editable="false" styleCss="font-weight: bold;color: #00B4DB;"/> <!-- Des_fecha_real_inicio -->
					<fieldView mappingTo="23" editable="false" styleCss="font-weight: bold;color: #00B4DB;"/> <!-- Des_fecha_prevista_fin-->
					<fieldView mappingTo="25" editable="false" styleCss="font-weight: bold;color: #00B4DB;"/> <!-- Des_fecha_real_fin -->
				     
					<fieldView mappingTo="35" editable="false" styleCss="font-weight: normal;color: #00B4DB;"/><!-- ID entrega -->
					<fieldView mappingTo="36" editable="false" styleCss="font-weight: normal;color: #00B4DB;"/><!--  Peticiones relacionadas -->
										
				</fieldViewSet>
			</grid>
		</viewComponent>
	</action>

	<action event="detail" submitError="ConsultaPeticionesGEDEON.detail"
		submitSucces="ConsultaPeticionesGEDEON.detail">

		<viewComponent>
			<form columns="4" title="Detalle Tarea GEDEON">
				<fieldViewSet entitymodel="peticiones"
					nameSpace="peticionesForm">
					<fieldView mappingTo="1" editable="false" />
					<fieldView mappingTo="2" editable="true" />
					<fieldView separator="br" />
					<fieldView separator="br" />
					<fieldView mappingTo="27" editable="false" />
					<fieldView mappingTo="26" editable="false" />
					<fieldView separator="br" />
					<fieldView separator="br" />					
					<fieldView mappingTo="3" editable="true" />
					<fieldView mappingTo="4" editable="true" />
					<fieldView separator="br" />
					<fieldView separator="br" />
					<fieldView mappingTo="36" editable="false" />
					<fieldView separator="br" />
					<fieldView mappingTo="5" editable="false" />
					<fieldView mappingTo="6" editable="false" />
					<fieldView mappingTo="7" editable="false" />
					<fieldView mappingTo="8" editable="false" />
					<fieldView separator="br" />
					<fieldView separator="br" />					
					<fieldView mappingTo="9" type="select" editable="false"><!-- Subdireccion Origen de la peticion -->
						<optionValues entitymodel="subdireccion" descrMappingTo="3">
						</optionValues>
					</fieldView>
					<fieldView mappingTo="10" editable="false" />
					<fieldView mappingTo="11" editable="false" />
					<fieldView mappingTo="12" editable="false" />
					<fieldView separator="br" />
					<fieldView separator="br" />
					<fieldView mappingTo="28" editable="false" />
					<fieldView mappingTo="29" editable="false" />
					<fieldView mappingTo="32" editable="false" />
					<fieldView mappingTo="13" editable="false" />
					<fieldView mappingTo="14" editable="false" />
					<fieldView mappingTo="15" editable="false" />
					<fieldView mappingTo="16" editable="false" />
					<fieldView separator="br" />
					<fieldView separator="br" />
					<fieldView mappingTo="17" editable="false" />
					<fieldView mappingTo="18" editable="false" />
					<fieldView mappingTo="19" editable="false" />
					<fieldView mappingTo="20" editable="false" />
					<fieldView mappingTo="21" editable="false" />
					<fieldView separator="br" />
					<fieldView separator="br" />
					<fieldView mappingTo="22" editable="false" />
					<fieldView mappingTo="23" editable="false" />
					<fieldView mappingTo="24" editable="false" />
					<fieldView mappingTo="25" editable="false" />					
					<fieldView mappingTo="34" editable="false" />
					<fieldView mappingTo="35" editable="false" />
				</fieldViewSet>
			</form>
			
			<grid title="Desglose tareas de esta petición" dependsOf="peticionesForm" orderDirection="asc"
					defaultOrderField="tareasPeticion.1" eventsRegistered="" serviceRef="ConsultaPeticionesGEDEON">
				
				<fieldViewSet entitymodel="tareasPeticion" nameSpace="tareasPeticion">
					<fieldView mappingTo="1" hidden="true" />					
					<fieldView mappingTo="2" editable="false"  />					
					<fieldView mappingTo="3" type="select" editable="false">
						<optionValues entitymodel="peticiones" descrMappingTo="1">
						</optionValues>
					</fieldView>
					<fieldView mappingTo="4" type="select" editable="false">
						<optionValues entitymodel="tiposTareas" descrMappingTo="2">
						</optionValues>
					</fieldView>					
					<fieldView mappingTo="5" editable="false"  />					
					<fieldView mappingTo="6" editable="false" styleCss="color: orange;" />
					<fieldView mappingTo="7" editable="false" styleCss="color: orange;" />					
					<fieldView mappingTo="8" editable="false" styleCss="color: #38ef7d;" />
					<fieldView mappingTo="9" editable="false" styleCss="color: #38ef7d;" />
					<fieldView mappingTo="10" editable="false" styleCss="color: #38ef7d;" />
					<fieldView mappingTo="11" editable="false" styleCss="color: #38ef7d;" />
				</fieldViewSet>
			</grid>
			
		</viewComponent>
	</action>


</service>

</service:service-group>

