<?xml version="1.0" encoding="ISO-8859-1"?>

<service:service-group
xmlns:service="http://pcm.framework.org/service"
	xmlns:xs="http://www.w3.org/2001/XMLSchema" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://pcm.framework.org/service services.xsd">
	
	<service name="EstudioPeticiones" profile="ADMINISTRADOR, CONSULTOR_UTE">

		<action event="query" submitError="EstudioPeticiones.query"
			submitSucces="EstudioPeticiones.query">

			<viewComponent>

				<form columns="2" title="Consultar estudios de Ciclo de Vida de Peticiones por períodos">
				
					<userbuttons>
				
						<button	link="prjManager" id="histog1" name="Comparativa Estudios" >
							<fieldViewSet nameSpace="histog1">
								<fieldView name="highchart" hidden="true" value="histogram3D"/>
								<fieldView name="entidadGrafico" hidden="true" value="agregadosPeticiones"/>
								<fieldView name="orderBy" hidden="true" value="1"/>
								<fieldView name="fieldForGroupBy" type="select">
									<optionValues>
										<option code="2" title="Agrupado por Estudio" selected="true"></option>
										<option code="45" title="Agrupado por Servicio"></option>
										<option code="3" title="Agrupado por Entorno"></option>
									</optionValues>
								</fieldView>
								<!-- fieldView separator="br" /> -->
								<fieldView name="agregado" type="radio">
									<optionValues>
										<option code="28" title="Ciclo Vida Petición" selected="true"></option>
										<option code="29" title="Análisis"></option>
										<option code="30" title="Desarrollo"></option>
										<option code="31" title="Pruebas en CD"></option>
										<option code="32" title="Intervalo Trámite y Desarrollo"></option>
										<option code="33" title="Intervalo Fin Desarrollo e Inicio PruebasCD"></option>
										<option code="34" title="Intervalo Fin PruebasCD e Instalación Producc."></option>
										<option code="35" title="Total Dedicaciones Efectivas Petición"></option>
										<option code="36" title="Total Intervalos sin Dedicación Petición"></option>
									</optionValues>
								</fieldView>
								<fieldView name="escalado" hidden="true" value="automatic"/>
								<fieldView name="operation" hidden="true" value="SUM"/>
							</fieldViewSet>
						</button>
					</userbuttons>
					
							
					<fieldViewSet entitymodel="agregadosPeticiones" nameSpace="agregadosPeticiones">
					
						<fieldset legend="Filtrar por Tecnología y Servicio">					
							<fieldView mappingTo="3" type="checkbox" size="10">
								<optionValues selectionMultiple="true">
									<option code="HOST" title="HOST"></option>
									<option code="Pros@" title="Pros@"></option>
								</optionValues>
							</fieldView>
							
							<fieldView mappingTo="45" type="select" size="5">
								<optionValues selectionMultiple="true">
									<option code="Servicio Nuevos Desarrollos Pros@" title="Servicio Nuevos Desarrollos Pros@"></option>
									<option code="Servicio Mto. Pros@" title="Servicio Mto. Aplicaciones Pros@"></option>
									<option code="Servicio Mto. HOST" title="Servicio Mto. Aplicaciones HOST"></option>
								</optionValues>
							</fieldView>
							
							<fieldView separator="br" />
							
						</fieldset>
						
						<fieldset legend="Filtrar por Fechas del estudio">
							<fieldView mappingTo="5" editable="true" />
							<fieldView mappingTo="6" editable="true" />
						</fieldset>
																	
					</fieldViewSet>
				</form>
				<grid title="Listado de Estudios realizados" orderDirection="asc" defaultOrderField="agregadosPeticiones.2"
					eventsRegistered="detail, create">
					<fieldViewSet entitymodel="agregadosPeticiones" nameSpace="agregadosPeticiones">
						<fieldView mappingTo="1" hidden="true" styleCss="font-weight: bold;"/><!-- Peticion -->
						<fieldView mappingTo="45" styleCss="font-weight: bold;color: white;"/>
						<fieldView mappingTo="3" hidden="true"/>
						<fieldView mappingTo="2" hidden="true"/>
						<fieldView mappingTo="4" styleCss="font-weight: bold;color: white;"/>
						<fieldView mappingTo="5" styleCss="font-weight: bold;color: white;"/>
						<fieldView mappingTo="6" styleCss="font-weight: bold;color: white;"/>
						<fieldView mappingTo="7" styleCss="font-weight: bold;color: white;"/>
						<fieldView mappingTo="8" styleCss="font-weight: bold;color: white;"/>
						
						<fieldView mappingTo="28" styleCss="font-weight: bold;color: yellow;"/>
						
						<fieldView mappingTo="29" styleCss="font-weight: bold;color: #38ef7d;"/>
						<fieldView mappingTo="30" styleCss="font-weight: bold;color: #38ef7d;"/>
						<fieldView mappingTo="31" styleCss="font-weight: bold;color: #38ef7d;"/>
						<fieldView mappingTo="35" styleCss="font-weight: bold;color: yellow;"/>
						
						<fieldView mappingTo="32" styleCss="font-weight: bold;color: orange;"/>
						<fieldView mappingTo="33" styleCss="font-weight: bold;color: orange;"/>
						<fieldView mappingTo="34" styleCss="font-weight: bold;color: orange;"/>
						<fieldView mappingTo="36" styleCss="font-weight: bold;color: yellow;"/>
						
					</fieldViewSet>
				</grid>
				
			</viewComponent>

		</action>
		
		<action event="detail" submitError="EstudioPeticiones.detail"
		submitSucces="EstudioPeticiones.detail">

		<viewComponent>
		
			<form columns="3" title="Detalle del Estudio">
				
				<userbuttons>
					<button	link="prjManager" id="histog1" name="Histogram" >
						<fieldViewSet nameSpace="histog1">
							<fieldView name="highchart" hidden="true" value="histogram3D"/>
							<fieldView name="entidadGrafico" hidden="true" value="resumenPeticiones"/>
							<fieldView name="filteredByField" hidden="true" value="2=agregadosPeticiones.1"/>
							<fieldView name="orderBy" hidden="true" value="1"/>
							<fieldView name="fieldForGroupBy" type="select">
								<optionValues>
									<option code="-1" title="periodos" selected="true"></option>
									<option code="15" title="aplicacion"></option>
									<option code="16" title="tipo"></option>
								</optionValues>
							</fieldView>
							<fieldView name="agregado" type="radio">
								<optionValues>
									<option code="-1" title="peticiones"></option>								
									<option code="28" title="UTs Estimadas"></option>
									<option code="6" title="CicloVida" selected="true"></option>
									<option code="7" title="Análisis"></option>
									<option code="8" title="Desarrollo"></option>
									<option code="9" title="Pruebas CD"></option>
									<option code="10" title="Lapso Planificación DG"></option>
									<option code="11" title="Lapso Planificación Pruebas CD"></option>
									<option code="12" title="Lapso Planificación Instalación Producc."></option>
									<option code="13" title="Total dedicaciones"></option>
									<option code="14" title="Total Intervalos sin dedicación"></option>
								</optionValues>
							</fieldView>
							<fieldView name="escalado" type="select">
								<optionValues>
									<option code="dayly" title="Diario"></option>
									<option code="weekly" title="Semanal"></option>
									<option code="monthly" title="Mensual" selected="true"></option>
									<option code="3monthly" title="Trimestral"></option>
									<option code="6monthly" title="Semestral"></option>
									<option code="anualy" title="Anual"></option>
									<option code="automatic" title="Automatico"></option>
								</optionValues>
							</fieldView>
							<fieldView name="operation" hidden="true" value="SUM"/>							
						</fieldViewSet>
					</button>
				</userbuttons>
				
				<fieldViewSet entitymodel="agregadosPeticiones"
					nameSpace="agregadosPeticionesForm">
					<fieldset legend="Resumen Estudio">
						<fieldView mappingTo="1" hidden="true" />
						<fieldView mappingTo="45" editable="false" />
						<fieldView mappingTo="3" editable="false" />
						<fieldView mappingTo="2" editable="false" />
						<fieldView mappingTo="4" editable="false" />
						<fieldView separator="br" />
						<fieldView separator="br" />
						<fieldView mappingTo="5" editable="false" />
						<fieldView mappingTo="6" editable="false" />
						<fieldView mappingTo="7" editable="false" />
						<fieldView mappingTo="8" editable="false" styleCss="font-weight: bold;color: yellow;"/>
						<fieldView separator="br" />
						<fieldView separator="br" />
					</fieldset>
					<fieldset legend="Agregados en Periodo Estudio">
						<fieldView mappingTo="9" editable="false" />
						<fieldView mappingTo="10" editable="false" styleCss="font-weight: bold;color: yellow;"/>
						<fieldView separator="br" />
						<fieldView separator="br" />
						<fieldView separator="br" />
						<fieldView mappingTo="11" editable="false" />
						<fieldView mappingTo="12" editable="false" />
						<fieldView mappingTo="13" editable="false" />
						<fieldView mappingTo="17" editable="false" styleCss="font-weight: bold;color: yellow;"/>
						<fieldView separator="br" />
						<fieldView separator="br" />
						<fieldView mappingTo="14" editable="false" />
						<fieldView mappingTo="15" editable="false" />
						<fieldView mappingTo="16" editable="false" />
						<fieldView mappingTo="18" editable="false" styleCss="font-weight: bold;color: yellow;"/>
						<fieldView separator="br" />
						<fieldView separator="br" />
					</fieldset>
					<fieldset legend="Promedios Mensuales">
						<fieldView mappingTo="19" editable="false" styleCss="font-weight: bold;color: yellow;"/>
						<fieldView separator="br" />
						<fieldView separator="br" />
						<fieldView separator="br" />
						<fieldView mappingTo="20" editable="false" />
						<fieldView mappingTo="21" editable="false" />					
						<fieldView mappingTo="22" editable="false" />
						<fieldView mappingTo="26" editable="false" styleCss="font-weight: bold;color: yellow;"/>
						<fieldView separator="br" />
						<fieldView separator="br" />						
						<fieldView mappingTo="23" editable="false" />
						<fieldView mappingTo="24" editable="false" />
						<fieldView mappingTo="25" editable="false" />		
						<fieldView mappingTo="27" editable="false" styleCss="font-weight: bold;color: yellow;"/>
						<fieldView separator="br" />
						<fieldView separator="br" />
					</fieldset>
					<fieldset legend="Promedios Por Petición">	
						<fieldView mappingTo="28" editable="false" styleCss="font-weight: bold;color: yellow;"/>
						<fieldView separator="br" />
						<fieldView separator="br" />
						<fieldView separator="br" />
						<fieldView mappingTo="29" editable="false" />
						<fieldView mappingTo="30" editable="false" />
						<fieldView mappingTo="31" editable="false" />
						<fieldView mappingTo="35" editable="false" styleCss="font-weight: bold;color: yellow;"/>
						<fieldView separator="br" />
						<fieldView separator="br" />
						<fieldView mappingTo="32" editable="false" />
						<fieldView mappingTo="33" editable="false" />
						<fieldView mappingTo="34" editable="false" />						
						<fieldView mappingTo="36" editable="false" styleCss="font-weight: bold;color: yellow;"/>
						<fieldView separator="br" />
						<fieldView separator="br" />
					</fieldset>
					<fieldset legend="Porcentajes Por Petición">	
						<fieldView mappingTo="37" editable="false" />
						<fieldView mappingTo="38" editable="false" />
						<fieldView mappingTo="39" editable="false" />
						<fieldView mappingTo="43" editable="false" styleCss="font-weight: bold;color: yellow;"/>
						<fieldView separator="br" />
						<fieldView separator="br" />
						<fieldView mappingTo="40" editable="false" />
						<fieldView mappingTo="41" editable="false" />
						<fieldView mappingTo="42" editable="false" />
						<fieldView mappingTo="44" editable="false" styleCss="font-weight: bold;color: yellow;"/>
						<fieldView separator="br" />
					</fieldset>
				</fieldViewSet>
			</form>
			
			<grid title="Resumen por peticiones del estudio" dependsOf="agregadosPeticionesForm" orderDirection="asc"
					defaultOrderField="resumenPeticiones.1">
				
				<fieldViewSet entitymodel="resumenPeticiones" nameSpace="resumenPeticiones">
					<fieldView mappingTo="1" hidden="true" />
					<fieldView mappingTo="16" editable="false" styleCss="color: white;" />
					<fieldView mappingTo="15" editable="false" styleCss="color: white;" />
					
					<fieldView mappingTo="2" type="select" editable="false">
						<optionValues entitymodel="agregadosPeticiones"
							descrMappingTo="2">
						</optionValues>
					</fieldView>
						
					<fieldView mappingTo="3" editable="false" styleCss="color: white;" />
					<fieldView mappingTo="4" editable="false" styleCss="color: white;" />
					<fieldView mappingTo="5" editable="false" styleCss="color: white;" />
					<fieldView mappingTo="6" editable="false" styleCss="font-weight: bold;color: white;" />
					<fieldView mappingTo="7" editable="false" styleCss="font-weight: bold;color: white;" />
					<fieldView mappingTo="8" editable="false" styleCss="font-weight: bold;color: white;" />
					<fieldView mappingTo="9" editable="false" styleCss="font-weight: bold;color: white;" />
					<fieldView mappingTo="10" editable="false" styleCss="font-weight: bold;color: white;" />
					<fieldView mappingTo="11" editable="false" styleCss="font-weight: bold;color: white;" />
					<fieldView mappingTo="12" editable="false" styleCss="font-weight: bold;color: white;" />
					<fieldView mappingTo="13" editable="false" styleCss="font-weight: bold;color: white;" />
					<fieldView mappingTo="14" editable="false" styleCss="font-weight: bold;color: white;" />
				</fieldViewSet>
			</grid>
		
		</viewComponent>
	</action>
		
	
	<action event="create" submitError="EstudioPeticiones.create"
		submitSucces="EstudioPeticiones.query" strategy="facturacionUte.strategies.GenerarEstudioCicloVida">
		<viewComponent>
			<form columns="2" title="Generar Estudio Ciclo Vida Peticiones por períodos">
				<fieldViewSet entitymodel="agregadosPeticiones" nameSpace="agregadosPeticiones">					
					<fieldset legend="Escoja el Servicio para el Estudio">											
						<fieldView mappingTo="45" type="select" size="5">
							<optionValues selectionMultiple="true">
								<option code="Servicio Nuevos Desarrollos Pros@" title="Servicio Nuevos Desarrollos Pros@"></option>
								<option code="Servicio Mto. Pros@" title="Servicio Mto. Aplicaciones Pros@"></option>
								<option code="Servicio Mto. HOST" title="Servicio Mto. Aplicaciones HOST"></option>
							</optionValues>
						</fieldView>
								
						<fieldView separator="br" />
								
					</fieldset>
							
					<fieldset legend="Introduzca fechas del estudio (inicio-fin)">
						<fieldView mappingTo="5" editable="true" />
						<fieldView mappingTo="6" editable="true" />
					</fieldset>
																		
				</fieldViewSet>
			</form>
		</viewComponent>
		
	</action>
	
	</service>
	
</service:service-group>	