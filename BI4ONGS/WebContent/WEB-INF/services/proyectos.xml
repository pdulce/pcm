<?xml version="1.0" encoding="ISO-8859-1"?>

<service:service-group
xmlns:service="http://pcm.framework.org/service"
	xmlns:xs="http://www.w3.org/2001/XMLSchema" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://pcm.framework.org/service services.xsd">
	
	<service name="GestionProyectos" profile="ADMINISTRADOR, CONSULTOR_UTE">

		<action event="query" submitError="GestionProyectos.query"
			submitSucces="GestionProyectos.query">

			<viewComponent>

				<form columns="53" title="Gestion de aplicaciones">
				
					<userbuttons>
					
						<button link="prjManager" id="barchartParam1"
							name="Barchart">
							<fieldViewSet nameSpace="barchartParam1">
								<fieldView name="highchart" hidden="true" value="barchart"/>
								<fieldView name="entidadGrafico" hidden="true" value="facturacionMesPorApp"/>								
								<fieldView name="orderBy" hidden="true" value="3"/>
								<fieldView name="filteredByField" hidden="true" value="7=proyecto.1"/>
								<fieldView name="fieldForGroupBy" type="select">
									<optionValues selectionMultiple="true">
										<option code="2" title="anualidades"></option>
										<option code="3" title="meses"></option>
									</optionValues>
								</fieldView>
								<fieldView name="agregado" type="select">
									<optionValues>
										<option code="8" title="facturado"></option>
										<option code="10" title="UTs realizadas"></option>
									</optionValues>
								</fieldView>
								<fieldView name="operation" hidden="true" value="SUM"/>								
							</fieldViewSet>
						</button>
						
						<button	link="Histogram3DStatsServlet" id="histParam2" 
							name="Histogram" >
							<fieldViewSet nameSpace="histParam2">
								<fieldView name="highchart" hidden="true" value="histogram3D"/>
								<fieldView name="entidadGrafico" hidden="true" value="facturacionMesPorApp"/>
								<fieldView name="orderBy" hidden="true" value="3"/>
								<fieldView name="filteredByField" hidden="true" value="7=proyecto.1"/>						
								<fieldView name="fieldForGroupBy" type="select">
									<optionValues selectionMultiple="true">
										<option code="2" title="anualidades"></option>
										<option code="3" title="meses"></option>
									</optionValues>
								</fieldView>
								<fieldView name="agregado" type="select">
									<optionValues>
										<option code="8" title="facturado"></option>
										<option code="10" title="UTs realizadas"></option>
									</optionValues>
								</fieldView>
								<fieldView name="escalado" hidden="true" value="automatic"/>
								<fieldView name="operation" hidden="true" value="SUM"/>								
							</fieldViewSet>
						</button>
						
						<button link="prjManager" id="piechartParam3"
							name="Piechart">
							<fieldViewSet nameSpace="piechartParam3">
								<fieldView name="highchart" hidden="true" value="piechart"/>
								<fieldView name="entidadGrafico" hidden="true" value="facturacionMesPorApp"/>
								<fieldView name="orderBy" hidden="true" value="3"/>
								<fieldView name="filteredByField" hidden="true" value="7=proyecto.1"/>
								<fieldView name="fieldForGroupBy" type="select">
									<optionValues selectionMultiple="true">
										<option code="2" title="anualidades"></option>
										<option code="3" title="meses"></option>
									</optionValues>
								</fieldView>
								<fieldView name="agregado" type="select">
									<optionValues>
										<option code="8" title="facturado"></option>
										<option code="10" title="UTs realizadas"></option>
									</optionValues>
								</fieldView>
								<fieldView name="operation" hidden="true" value="SUM"/>								
							</fieldViewSet>
						</button>
						
					</userbuttons>
					
					<fieldViewSet entitymodel="proyecto" nameSpace="proyecto">
						
						<fieldView mappingTo="16" type="select" editable="true">
							<optionValues entitymodel="subdireccion"
								descrMappingTo="3">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="1" type="select" size="15">
							<optionValues selectionMultiple="true" entitymodel="proyecto"
								descrMappingTo="2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="14" type="select" size="15">
							<optionValues selectionMultiple="true" entitymodel="tipoAplicacion"
								descrMappingTo="2">
							</optionValues>
						</fieldView>
						<fieldView separator="br" />
						<fieldView separator="br" />
						
						<fieldView mappingTo="3" size="25" />
						<fieldView mappingTo="4" type="select" size="12">
							<optionValues selectionMultiple="true" entitymodel="colaborador"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="8" type="select" size="12">
							<optionValues selectionMultiple="true" entitymodel="colaborador"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>
						
						<fieldView separator="br" />
						<fieldView separator="br" />
						
						<fieldView mappingTo="5" type="select" size="12">
							<optionValues selectionMultiple="true" entitymodel="concurso" descrMappingTo="2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="6" type="select" editable="true">
							<optionValues selectionMultiple="true" entitymodel="responsableCentro"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="7" type="select" editable="true">
							<optionValues selectionMultiple="true" entitymodel="departamento"
								descrMappingTo="2">
							</optionValues>
						</fieldView>
					</fieldViewSet>
				
				</form>

				<grid title="Listado de aplicaciones" orderDirection="asc" defaultOrderField="proyecto.3"
					eventsRegistered="update,delete,create">

					<fieldViewSet entitymodel="proyecto" nameSpace="proyecto">
						<fieldView mappingTo="1" hidden="true"/>
						<fieldView mappingTo="2" hidden="true"/>
						<fieldView mappingTo="16" type="select">
							<optionValues entitymodel="subdireccion"
								descrMappingTo="3">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="3" />
						<fieldView mappingTo="14" type="select">
							<optionValues entitymodel="tipoAplicacion"
								descrMappingTo="2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="4" type="select">
							<optionValues entitymodel="colaborador"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>						
						<fieldView mappingTo="6" type="select">
							<optionValues entitymodel="responsableCentro"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>					
						<fieldView mappingTo="8" type="select">
							<optionValues entitymodel="colaborador"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="15" />
					</fieldViewSet>

				</grid>

			</viewComponent>

		</action>

		<action event="delete" submitError="GestionProyectos.delete"
			submitSucces="GestionProyectos.query"
			strategy="facturacionUte.strategies.concursos.StrategyBorrarAgregadosMesesApp">

			<viewComponent>
				<form columns="53" title="Borrado aplicacion">

					<fieldViewSet entitymodel="proyecto" nameSpace="proyecto">
						<fieldView mappingTo="1" hidden="true" />
						<fieldView mappingTo="3" size="25" editable="false" />
						<fieldView mappingTo="14" type="select" editable="false">
							<optionValues selectionMultiple="true" entitymodel="tipoAplicacion"
								descrMappingTo="2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="5" type="select" editable="false">
							<optionValues entitymodel="concurso" descrMappingTo="2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="16" type="select" editable="false">
							<optionValues entitymodel="subdireccion"
								descrMappingTo="3">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="6" type="select" editable="false">
							<optionValues entitymodel="responsableCentro"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>

						<fieldView separator="br" />
						<fieldView separator="br" />

						<fieldView mappingTo="7" type="select" editable="false">
							<optionValues editable="false" entitymodel="departamento"
								descrMappingTo="2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="2" size="10" editable="false" />
						<fieldView mappingTo="4" type="select" editable="false">
							<optionValues entitymodel="colaborador"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="8" type="select" editable="false">
							<optionValues entitymodel="colaborador"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>
						
						<fieldView separator="br" />
						<fieldView separator="br" />
												
						<fieldView mappingTo="13" type="textarea" editable="false"/>
						
					</fieldViewSet>

				</form>
			</viewComponent>
		</action>

		<action event="create" submitError="GestionProyectos.create"
			submitSucces="GestionProyectos.query"
			strategyPre="facturacionUte.strategies.concursos.StrategyEncajarNuevaApp"
			strategy="facturacionUte.strategies.concursos.StrategyCrearAgregadosMesesAppDptoServicio">

			<viewComponent>
				<form columns="53" title="Alta Formulario aplicacion">
					<fieldViewSet entitymodel="proyecto" nameSpace="proyecto">
					
						<fieldView mappingTo="16" type="select" editable="true">
							<optionValues entitymodel="subdireccion"
								descrMappingTo="3">
							</optionValues>
						</fieldView>

						<fieldView separator="br" />
						<fieldView separator="br" />
						
						<fieldView mappingTo="5" type="select">
							<optionValues entitymodel="concurso" descrMappingTo="2">
							</optionValues>
						</fieldView>

						<fieldView mappingTo="6" type="select" editable="true">
							<optionValues entitymodel="responsableCentro"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="7" type="select" editable="true">
							<optionValues editable="false" entitymodel="departamento"
								descrMappingTo="2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="2" size="10" />
						
						<fieldView separator="br" />
						<fieldView separator="br" />
						
						<fieldView mappingTo="3" size="25" />
						<fieldView mappingTo="14" type="select" editable="true">
							<optionValues selectionMultiple="true" entitymodel="tipoAplicacion"
								descrMappingTo="2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="4" type="select" editable="true">
							<optionValues entitymodel="colaborador"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="8" type="select" editable="true">
							<optionValues entitymodel="colaborador"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>
						
						<fieldView separator="br" />
						<fieldView separator="br" />

						<fieldView mappingTo="9" size="10" editable="true" />
						<fieldView mappingTo="10" size="10" editable="true" />
						<fieldView mappingTo="11" size="10" editable="true" />
						<fieldView mappingTo="12" size="10" editable="true" />
						
						<fieldView separator="br" />
						<fieldView separator="br" />
						
						<fieldView mappingTo="13" type="textarea" editable="true"/>
						
						<fieldView mappingTo="15" hidden="true" value="SYSDATE()"/>
						
					</fieldViewSet>
				</form>
			</viewComponent>
		</action>

		<action event="update" submitError="GestionProyectos.update"
			submitSucces="GestionProyectos.update"
			strategy="facturacionUte.strategies.concursos.StrategyCrearAgregadosMesesAppDptoServicio"> <!-- -->

			<viewComponent>
				<form columns="53" title="Edicion Aplicacion">
				
					<userbuttons>
						
						<button link="prjManager" id="barchartParam1"
							name="Barchart">
							<fieldViewSet nameSpace="barchartParam1">
								<fieldView name="highchart" hidden="true" value="barchart"/>
								<fieldView name="entidadGrafico" hidden="true" value="facturacionMesPorColaboradoryApp"/>
								<fieldView name="filteredByField" hidden="true" value="4=proyecto.1"/>
								<fieldView name="orderBy" hidden="true" value="4"/>							
								<fieldView name="fieldForGroupBy" type="select">
									<optionValues>										
										<option code="3" title="colaboradores"></option>
									</optionValues>
								</fieldView>
								<fieldView name="agregado" type="select">
									<optionValues>
										<option code="7" title="facturado"></option>
										<option code="5" title="UTs realizadas"></option>
									</optionValues>
								</fieldView>
								<fieldView name="operation" hidden="true" value="SUM"/>								
							</fieldViewSet>
						</button>
						
						<button	link="Histogram3DStatsServlet" id="histParam2" 
							name="Histogram" >
							<fieldViewSet nameSpace="histParam2">
								<fieldView name="highchart" hidden="true" value="histogram3D"/>
								<fieldView name="entidadGrafico" hidden="true" value="facturacionMesPorColaboradoryApp"/>
								<fieldView name="filteredByField" hidden="true" value="4=proyecto.1"/>
								<fieldView name="orderBy" hidden="true" value="4"/>							
								<fieldView name="fieldForGroupBy" type="select">
									<optionValues>
										<option code="3" title="colaboradores"></option>
									</optionValues>
								</fieldView>
								<fieldView name="agregado" type="select">
									<optionValues>
										<option code="7" title="facturado"></option>
										<option code="5" title="UTs realizadas"></option>
									</optionValues>
								</fieldView>
								<fieldView name="escalado" hidden="true" value="automatic"/>
								<fieldView name="operation" hidden="true" value="SUM"/>								
							</fieldViewSet>
						</button>
						
						<button link="prjManager" id="piechartParam3"
							name="Piechart">
							<fieldViewSet nameSpace="piechartParam3">
								<fieldView name="highchart" hidden="true" value="piechart"/>
								<fieldView name="entidadGrafico" hidden="true" value="facturacionMesPorColaboradoryApp"/>
								<fieldView name="filteredByField" hidden="true" value="4=proyecto.1"/>								
								<fieldView name="orderBy" hidden="true" value="4"/>							
								<fieldView name="fieldForGroupBy" type="select">
									<optionValues>
										<option code="3" title="colaboradores"></option>						
									</optionValues>
								</fieldView>
								<fieldView name="agregado" type="select">
									<optionValues>
										<option code="7" title="facturado"></option>
										<option code="5" title="UTs realizadas"></option>
									</optionValues>
								</fieldView>
								<fieldView name="operation" hidden="true" value="SUM"/>								
							</fieldViewSet>
						</button>
						
						<button link="prjManager" id="barchartParam4"
							name="Barchart">
							<fieldViewSet nameSpace="barchartParam4">
								<fieldView name="highchart" hidden="true" value="barchart"/>
								<fieldView name="entidadGrafico" hidden="true" value="facturacionMesPorApp"/>
								<fieldView name="filteredByField" hidden="true" value="7=proyecto.1;2=filtroStats.anyo;3=filtroStats.mes"/>
								<fieldView name="orderBy" hidden="true" value="4"/>							
								<fieldView name="fieldForGroupBy" type="select">
									<optionValues selectionMultiple="true">
										<option code="2" title="anualidades"></option>
										<option code="3" title="meses"></option>
									</optionValues>
								</fieldView>
								<fieldView name="agregado" type="select">
									<optionValues>
										<option code="8" title="facturado"></option>
										<option code="10" title="UTs realizadas"></option>
									</optionValues>
								</fieldView>
								<fieldView name="operation" hidden="true" value="SUM"/>								
							</fieldViewSet>
						</button>
						
						<button	link="Histogram3DStatsServlet" id="histParam5" 
							name="Histogram" >
							<fieldViewSet nameSpace="histParam5">
								<fieldView name="highchart" hidden="true" value="histogram3D"/>
								<fieldView name="entidadGrafico" hidden="true" value="facturacionMesPorApp"/>
								<fieldView name="filteredByField" hidden="true" value="7=proyecto.1;2=filtroStats.anyo;3=filtroStats.mes"/>
								<fieldView name="orderBy" hidden="true" value="4"/>							
								<fieldView name="fieldForGroupBy" type="select">
									<optionValues selectionMultiple="true">
										<option code="2" title="anualidades"></option>
										<option code="3" title="meses"></option>
									</optionValues>
								</fieldView>
								<fieldView name="agregado" type="select">
									<optionValues>
										<option code="8" title="facturado"></option>
										<option code="10" title="UTs realizadas"></option>
									</optionValues>
								</fieldView>
								<fieldView name="escalado" hidden="true" value="automatic"/>
								<fieldView name="operation" hidden="true" value="SUM"/>								
							</fieldViewSet>
						</button>
						
						<button link="prjManager" id="piechartParam6"
							name="Piechart">
							<fieldViewSet nameSpace="piechartParam6">
								<fieldView name="highchart" hidden="true" value="piechart"/>
								<fieldView name="entidadGrafico" hidden="true" value="facturacionMesPorApp"/>
								<fieldView name="filteredByField" hidden="true" value="7=proyecto.1;2=filtroStats.anyo;3=filtroStats.mes"/>
								<fieldView name="orderBy" hidden="true" value="4"/>							
								<fieldView name="fieldForGroupBy" type="select">
									<optionValues selectionMultiple="true">
										<option code="2" title="anualidades"></option>
										<option code="3" title="meses"></option>
									</optionValues>
								</fieldView>
								<fieldView name="agregado" type="select">
									<optionValues>
										<option code="8" title="facturado"></option>
										<option code="10" title="UTs realizadas"></option>
									</optionValues>
								</fieldView>
								<fieldView name="operation" hidden="true" value="SUM"/>								
							</fieldViewSet>
						</button>
					
					</userbuttons>
					
					<fieldViewSet entitymodel="proyecto" nameSpace="proyecto">
						
						<fieldView mappingTo="1" hidden="true" />
						<fieldView mappingTo="15" hidden="true" value="SYSDATE()"/>
						
						<fieldView mappingTo="2" size="10" editable="false" styleCss="font-weight: bold;color: blue;"/>
						<fieldView mappingTo="16" type="select" editable="true">
							<optionValues entitymodel="subdireccion"
								descrMappingTo="3">
							</optionValues>
						</fieldView>
						
						<fieldView separator="br" />
						<fieldView separator="br" />
						
						<fieldView mappingTo="5" type="select">
							<optionValues entitymodel="concurso" descrMappingTo="2">
							</optionValues>
						</fieldView>
						
						<fieldView mappingTo="6" type="select" editable="true">
							<optionValues entitymodel="responsableCentro"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="7" type="select" editable="true">
							<optionValues editable="false" entitymodel="departamento"
								descrMappingTo="2">
							</optionValues>
						</fieldView>
						
						<fieldView separator="br" />
						<fieldView separator="br" />
						
						<fieldView mappingTo="3" size="25" />
						<fieldView mappingTo="14" type="select" editable="true">
							<optionValues selectionMultiple="true" entitymodel="tipoAplicacion"
								descrMappingTo="2">
							</optionValues>
						</fieldView>
						
						<fieldView mappingTo="4" type="select" editable="true">
							<optionValues entitymodel="colaborador"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="8" type="select" editable="true">
							<optionValues entitymodel="colaborador"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>
						
						<fieldView separator="br" />
						<fieldView separator="br" />
						<fieldView mappingTo="9" size="10" editable="true" />
						<fieldView mappingTo="10" size="10" editable="true" />
						<fieldView mappingTo="11" size="10" editable="true" />
						<fieldView mappingTo="12" size="10" editable="true" />
						
						<fieldView separator="br" />
						<fieldView separator="br" />
						<fieldView mappingTo="13" type="textarea" editable="true"/>
						
					</fieldViewSet>
					
					<fieldViewSet nameSpace="filtroStats">
						<fieldView name="mes" type="select">
							<optionValues selectionMultiple="true">
								<option code="1" title="ene"></option>
								<option code="2" title="feb"></option>
								<option code="3" title="marzo"></option>
								<option code="4" title="abril"></option>
								<option code="5" title="mayo"></option>
								<option code="6" title="junio"></option>
								<option code="7" title="julio"></option>
								<option code="8" title="ago"></option>
								<option code="9" title="sept"></option>
								<option code="10" title="oct"></option>
								<option code="11" title="nov"></option>
								<option code="12" title="dic"></option>
							</optionValues>
						</fieldView>
						<fieldView name="anyo" type="select">
							<optionValues selectionMultiple="true">
								<option code="2017" title="2017"></option>
								<option code="2018" title="2018"></option>
								<option code="2019" title="2019"></option>
							</optionValues>
						</fieldView>
					</fieldViewSet>
				
					
				</form>
				
				<grid title="Listado de colaboradores asignados a este aplicativo/proyecto" dependsOf="proyecto" orderDirection="asc"
					defaultOrderField="appColaborador.2" eventsRegistered="create,delete"
					serviceRef="GestionAppsColaborador">
					<fieldViewSet entitymodel="appColaborador"
						nameSpace="appColaborador">
						<fieldView mappingTo="1" hidden="true"/>								
						<fieldView mappingTo="2" type="select">
							<optionValues entitymodel="colaborador"
								descrMappingTo="3, 2">
							</optionValues>
						</fieldView>	
					</fieldViewSet>
				</grid>
				
				<grid title="Listado de mensualidades de facturacion de este aplicativo/proyecto" dependsOf="proyecto" orderDirection="asc"
					defaultOrderField="facturacionMesPorApp.2" eventsRegistered="detail"
					serviceRef="GestionImputadoColaboradoresApp">					
					<fieldViewSet entitymodel="facturacionMesPorApp"
						nameSpace="facturacionMesPorApp">
						<fieldView mappingTo="1" hidden="true"/>
						<fieldView mappingTo="2"/>								
						<fieldView mappingTo="3" type="select">
							<optionValues entitymodel="mes"
								descrMappingTo="2">
							</optionValues>
						</fieldView>
						<fieldView mappingTo="8" styleCss="font-weight: bold;color: blue;"/>
						<fieldView mappingTo="9" styleCss="font-weight: bold;color: blue;"/>
						<fieldView mappingTo="10" styleCss="font-weight: bold;color: blue;"/>
					</fieldViewSet>
				</grid>
				
			</viewComponent>
		</action>
	
	</service>

	
</service:service-group>